var j=Object.defineProperty;var v=(t,n,r)=>n in t?j(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var E=(t,n,r)=>v(t,typeof n!="symbol"?n+"":n,r);import{r as s,j as o,k}from"./index-jR0FLVqU.js";import{b as y,a1 as z,F as b,T as I,B as S,S as T,a2 as g}from"./styles-B8Yckata.js";import{T as M}from"./Title-DYSXEtp2.js";const _=(t="quen-ui-")=>`${t}${Math.random().toString(36).slice(2,11)}`;class C{constructor(){E(this,"subscribes",[]);E(this,"notifications",[])}subscribe(n){this.subscribes.push(n)}unsubscribe(n){this.subscribes=this.subscribes.filter(r=>r===n?void 0:r)}notify(){this.subscribes.forEach(n=>n())}updateNotifications(n){this.notifications=n,this.notify()}get data(){return this.notifications}}const i=new C,L=t=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 16 16",...t},s.createElement("circle",{cx:8,cy:8,r:7}),s.createElement("circle",{cx:8,cy:4.5,r:.75,fill:"blue"}),s.createElement("path",{d:"M8 7.5v3.5",strokeLinecap:"round"})),A=t=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 16 16",...t},s.createElement("path",{d:"M8 2l6 11H2L8 2z",strokeLinejoin:"round"}),s.createElement("path",{d:"M8 5.5v3.5",strokeLinecap:"round"}),s.createElement("circle",{cx:8,cy:11.5,r:.75,fill:"orange"})),B=t=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 16 16",...t},s.createElement("circle",{cx:8,cy:8,r:7}),s.createElement("path",{d:"M5.5 5.5l5 5M10.5 5.5l-5 5",strokeLinecap:"round"})),q=t=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 16 16",...t},s.createElement("circle",{cx:8,cy:8,r:7}),s.createElement("path",{d:"M5 8l2 2 4-4",strokeLinecap:"round",strokeLinejoin:"round"})),w=({message:t,status:n="info",title:r,isCloseButton:a=!0,onClose:l,className:p,autoClose:d=!0,icon:u,loading:x})=>{const m=s.useRef(-1),N=s.useMemo(()=>{if(x)return o.jsx(y,{view:"oval"});if(typeof u=="boolean"&&u)switch(n){case"error":return o.jsx(B,{className:"quen-ui__notification-icon"});case"info":return o.jsx(L,{className:"quen-ui__notification-icon"});case"warning":return o.jsx(A,{className:"quen-ui__notification-icon"});case"success":return o.jsx(q,{className:"quen-ui__notification-icon"})}return u},[u,n]),e=()=>window.clearTimeout(m.current),c=()=>{typeof d=="number"&&(m.current=window.setTimeout(()=>l==null?void 0:l({}),d)),d&&(m.current=window.setTimeout(()=>l==null?void 0:l({}),5e3))};return s.useEffect(()=>(c(),e),[d]),o.jsxs(z,{className:p,status:n,children:[o.jsxs(b,{gap:"m",direction:"row",justify:"space-between",align:"center",children:[o.jsxs(b,{gap:"m",align:"center",children:[N,r?o.jsx(M,{size:"xs",children:r}):o.jsx(I,{size:"s",children:t})]}),a&&o.jsx(S,{view:"icon",size:"s",onClick:()=>l==null?void 0:l({}),children:o.jsx(T,{width:16})})]}),r&&o.jsx(I,{size:"s",type:"secondary",children:t})]})},f="quen-ui-notifications",P=()=>{const[t,n]=s.useState([]),[r,a]=s.useState();s.useEffect(()=>{let e=document.getElementById(f);e||(e=document.createElement("div"),e.setAttribute("id",f),document.body.appendChild(e)),a(e)},[]);const l=s.useMemo(()=>t.filter(e=>e.position==="top"),[t]),p=s.useMemo(()=>t.filter(e=>e.position==="top-left"),[t]),d=s.useMemo(()=>t.filter(e=>e.position==="top-right"),[t]),u=s.useMemo(()=>t.filter(e=>e.position==="bottom"),[t]),x=s.useMemo(()=>t.filter(e=>e.position==="bottom-left"),[t]),m=s.useMemo(()=>t.filter(e=>e.position==="bottom-right"),[t]);s.useEffect(()=>{},[]),s.useEffect(()=>(i.subscribe(N),()=>{i.unsubscribe(N),r==null||r.remove()}),[]);const N=()=>{n([...i.data])};return r?k.createPortal(o.jsxs(o.Fragment,{children:[l.length?o.jsx(g,{zIndex:l[l.length-1].zIndex,position:"top",children:o.jsx("div",{children:l.map(e=>s.createElement(w,{...e,key:e.id,onClose:()=>{var c;h(e.id),(c=e.onClose)==null||c.call(e,e)}}))})}):null,p.length?o.jsx(g,{zIndex:p[p.length-1].zIndex,position:"top-left",children:p.map(e=>s.createElement(w,{...e,key:e.id,onClose:()=>{var c;h(e.id),(c=e.onClose)==null||c.call(e,e)}}))}):null,d.length?o.jsx(g,{position:"top-right",zIndex:d[d.length-1].zIndex,children:d.map(e=>s.createElement(w,{...e,key:e.id,onClose:()=>{var c;h(e.id),(c=e.onClose)==null||c.call(e,e)}}))}):null,u.length?o.jsx(g,{position:"bottom",zIndex:u[u.length-1].zIndex,children:u.map(e=>s.createElement(w,{...e,key:e.id,onClose:()=>{var c;h(e.id),(c=e.onClose)==null||c.call(e,e)}}))}):null,x.length?o.jsx(g,{position:"bottom-left",zIndex:x[x.length-1].zIndex,children:x.map(e=>s.createElement(w,{...e,key:e.id,onClose:()=>{var c;h(e.id),(c=e.onClose)==null||c.call(e,e)}}))}):null,m.length?o.jsx(g,{position:"bottom-right",zIndex:m[m.length-1].zIndex,children:m.map(e=>s.createElement(w,{...e,key:e.id,onClose:()=>{var c;h(e.id),(c=e.onClose)==null||c.call(e,e)}}))}):null]}),r):null},W=t=>{const n=t.id||_();let r=[];return t.id&&i.data.some(a=>a.id===t.id)?r=i.data:r=[...i.data,{...t,id:n,position:t.position||"top"}],i.updateNotifications(r),n},h=t=>{const n=i.data.filter(r=>{var a;return r.id===t?((a=r.onClose)==null||a.call(r,r),!1):!0});return i.updateNotifications(n),t},F=t=>{const n=i.data.map(r=>r.id===t.id?{...r,...t}:r);return i.updateNotifications(n),t.id},O=()=>{i.updateNotifications([])},U={show:W,hide:h,update:F,clean:O},G=["success","warning","error","info"];export{G as N,P as a,U as n};
